# M1.0.2 Release Notes & Implementation Guide

**Release Version:** M1.0.2 - Core Integration  
**Status:** üü° In Progress  
**Start Date:** January 9, 2026  
**Target Completion:** January 23, 2026  
**Duration:** 2 weeks

---

## üìã EXECUTIVE SUMMARY

This release focuses on integrating verified backend APIs into the existing mobile app UI without modifying signed-off designs. All features leverage existing screens and components, adding only backend connectivity and data flow.

### Key Principle
**‚úÖ No UI changes - API integration only into existing screens**

---

## üéØ RELEASE OBJECTIVES

1. ‚úÖ **Bundle Products Filter** - Enable filtering of bundle products using existing product screen
2. ‚è≥ **Address Update** - Integrate PUT endpoint for full address updates
3. ‚è≥ **Product Details** - Add specifications and images to product details
4. ‚è≥ **Disputes System** - Implement photo upload and dispute creation
5. ‚è≥ **Remove Mock Data** - Replace all hardcoded data with live API calls

---

## ‚úÖ COMPLETED FEATURES

### 1. Bundle Products Filter (January 9, 2026)

**Status:** ‚úÖ COMPLETE  
**Implementation Time:** 30 minutes  
**Developer:** [Assigned Developer Name]

#### What Was Done
Added `isBundle` parameter to existing products fetching system to filter bundle products through the live API.

#### Files Modified
- `lib/features/home/presentation/bloc/products_bloc/products_event.dart`
- `lib/features/home/presentation/bloc/products_bloc/products_bloc.dart`

#### Technical Changes
1. **ProductsEvent** - Added `final bool? isBundle` parameter
2. **ProductsBloc** - Added `IsBundle` to API query parameters
3. **Refresh/LoadNextPage** - Updated methods to support bundle filtering

#### API Endpoint
```
GET /v1/client/products?IsBundle=true&PageSize=10&PageIndex=1
```

#### How to Use
```dart
// Display bundles in existing AllProductScreen
context.read<ProductsBloc>().add(
  FetchProducts(
    isBundle: true,
    executeClear: true,
  ),
);
```

#### Testing Status
- [ ] Unit tests written
- [ ] Integration tested with Swagger
- [ ] Tested with production test account
- [ ] QA verified on device
- [ ] Pagination tested
- [ ] Combined with other filters (supplier, price)

#### Known Issues
None

---

## ‚è≥ PENDING FEATURES

### 2. Address Update Integration

**Status:** üî¥ NOT STARTED  
**Estimated Time:** 1-2 days  
**Priority:** HIGH  
**Dependencies:** None

#### Overview
Integrate PUT endpoint for updating existing addresses with all fields (required + optional).

#### API Endpoint
```
PUT /v1/client/addresses/{id}
```

#### Required Request Body
```json
{
  "address": "Building 45, Zone 52, Doha",
  "latitude": 25.276987,
  "longitude": 51.520008,
  "title": "Home",
  "areaId": 3,
  "building": "45",
  "apartment": "12A",
  "floor": "3",
  "notes": "Ring doorbell twice",
  "isDefault": true
}
```

#### Implementation Tasks
1. Update `AddressModel` with missing fields (title, areaId, building, apartment, floor, notes)
2. Update address remote data source with PUT method
3. Update address repository to handle PUT
4. Update address controller validation
5. Update existing address form UI to include new fields
6. Add map picker for GPS coordinates
7. Implement validation (address ‚â§500 chars, lat/lng ranges, etc.)

#### Files to Modify
- `lib/features/profile/data/models/address_model.dart`
- `lib/features/profile/data/datasources/address_remote_datasource.dart`
- `lib/features/profile/data/repositories/address_repository_impl.dart`
- `lib/features/profile/presentation/controllers/address_controller.dart`
- `lib/features/profile/presentation/screens/address_form_screen.dart` (existing form only)

#### Testing Checklist
- [ ] Update address with all fields
- [ ] Update address with required fields only
- [ ] Validate field length limits
- [ ] Validate GPS coordinate ranges
- [ ] Set as default functionality
- [ ] Error handling (404, 401, 400)

#### Reference Documentation
See `M1.0.2_DETAILED_IMPLEMENTATION_GUIDE.md` Section: "FEATURE 1: ADDRESS UPDATE INTEGRATION"

---

### 3. Product Details with Specifications

**Status:** üî¥ NOT STARTED  
**Estimated Time:** 1 day  
**Priority:** HIGH  
**Dependencies:** None

#### Overview
Add product specifications and multiple images to existing product details screen.

#### API Response Includes
```json
{
  "vsid": 1,
  "enName": "Premium Water 5 Gallon",
  "specifications": [
    {
      "id": 1,
      "keyEn": "Volume",
      "keyAr": "ÿßŸÑÿ≠ÿ¨ŸÖ",
      "valueEn": "5 Gallons",
      "valueAr": "5 ÿ¨ÿßŸÑŸàŸÜ"
    }
  ],
  "productImages": [
    {
      "id": 1,
      "filePath": "https://...",
      "isPrimary": true,
      "displayOrder": 1
    }
  ]
}
```

#### Implementation Tasks
1. Update `ProductModel` to include nested `ProductSpecification` and `ProductImage` models
2. Update product details screen to display specifications in tabs/sections
3. Add image gallery/carousel for multiple images
4. Handle empty specifications gracefully
5. Support Arabic RTL for spec names

#### Files to Modify
- `lib/features/home/domain/models/product_model.dart`
- `lib/features/home/presentation/screens/product_details_screen.dart` (existing screen)

#### Testing Checklist
- [ ] Product with full specifications
- [ ] Product with no specifications
- [ ] Product with single image
- [ ] Product with multiple images
- [ ] Out of stock product
- [ ] Arabic locale spec display

#### Reference Documentation
See `M1.0.2_DETAILED_IMPLEMENTATION_GUIDE.md` Section: "FEATURE 2: PRODUCT DETAILS WITH SPECIFICATIONS"

---

### 4. Disputes System

**Status:** üî¥ NOT STARTED  
**Estimated Time:** 3-4 days  
**Priority:** MEDIUM  
**Dependencies:** None

#### Overview
Implement two-step dispute creation: upload evidence documents, then create dispute with evidence IDs.

#### API Endpoints

**Step 1: Upload Evidence**
```
POST /v1/client/disputes/evidence
Content-Type: multipart/form-data
```

**Step 2: Create Dispute**
```
POST /v1/client/disputes
```

#### Implementation Tasks
1. Create dispute models (DisputeType, DisputeEvidence, Dispute)
2. Create evidence upload service with image picker
3. Create dispute form with order item selection
4. Implement two-step creation flow
5. Add dispute list screen
6. Add dispute details screen
7. Handle all dispute statuses (Pending, In Review, Resolved, Rejected, Escalated)

#### Files to Create/Modify
- `lib/features/disputes/data/models/dispute_model.dart` (new)
- `lib/features/disputes/data/datasources/dispute_remote_datasource.dart` (new)
- `lib/features/disputes/presentation/screens/create_dispute_screen.dart` (new or existing)
- `lib/features/disputes/presentation/screens/dispute_list_screen.dart` (existing?)

#### Testing Checklist
- [ ] Upload single photo evidence
- [ ] Upload multiple photos
- [ ] Create dispute with evidence
- [ ] Create dispute without evidence
- [ ] View dispute list
- [ ] View dispute details
- [ ] All status displays correctly

#### Reference Documentation
See `M1.0.2_DETAILED_IMPLEMENTATION_GUIDE.md` Section: "FEATURE 4: DISPUTES SYSTEM" (to be added)

---

### 5. Remove Mock Data

**Status:** üî¥ NOT STARTED  
**Estimated Time:** 1 day  
**Priority:** LOW  
**Dependencies:** Features 1-4 complete

#### Overview
Audit entire codebase and remove all hardcoded/mock data, ensuring all data comes from live APIs.

#### Areas to Audit
1. Product lists (categories, suppliers)
2. Order history
3. User profile data
4. Address lists
5. Favorites
6. Cart items (if persisted)
7. Notifications
8. Any placeholder images or text

#### Implementation Tasks
1. Search codebase for mock data arrays
2. Replace with API calls or empty states
3. Add proper loading states
4. Add empty state UI for zero data
5. Update error handling

#### Testing Checklist
- [ ] Fresh install shows no mock data
- [ ] All screens load from API
- [ ] Empty states display correctly
- [ ] No hardcoded product/user data found

---

## üìä PROGRESS TRACKING

### Overall Progress
```
[‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë] 5% Complete (1/5 features)
```

### Feature Status
| Feature | Status | Progress | ETA |
|---------|--------|----------|-----|
| Bundle Filter | ‚úÖ Complete | 100% | Done |
| Address Update | üî¥ Not Started | 0% | Jan 12 |
| Product Details | üî¥ Not Started | 0% | Jan 15 |
| Disputes System | üî¥ Not Started | 0% | Jan 19 |
| Remove Mock Data | üî¥ Not Started | 0% | Jan 22 |

---

## üß™ TESTING REQUIREMENTS

### Test Environment
- **Base URL:** `https://nartawi.smartvillageqatar.com/api`
- **Swagger:** `https://nartawi.smartvillageqatar.com/swagger/index.html`
- **Test Account:** `testcustomer@nartawi.com` / [password from team]

### Testing Phases

#### Phase 1: Development Testing (Per Feature)
- Developer tests locally during implementation
- Verify API calls in network logs
- Test happy path and error cases
- Verify data models parse correctly

#### Phase 2: Integration Testing
- Test feature with real production data
- Test with test account on Swagger
- Verify pagination, filters, search
- Test concurrent operations

#### Phase 3: QA Testing
- QA team tests on physical devices
- Test Android and iOS
- Test Arabic RTL layout
- Test edge cases (no data, errors, offline)
- Performance testing (load times, memory)

#### Phase 4: UAT (User Acceptance)
- Product owner verifies against requirements
- Test with real user scenarios
- Verify business logic
- Sign-off before release

---

## üö® KNOWN LIMITATIONS & WORKAROUNDS

### 1. Delivery Address Not Stored in Orders
**Issue:** Backend doesn't store delivery address in order records  
**Workaround:** Cache last-used address in local storage and display in order details  
**Impact:** Address may be inaccurate if user changes it after order placement

### 2. Time Slots Not Available via API
**Issue:** No API endpoint for delivery time slots  
**Workaround:** Use hardcoded time slots (6-9am, 10-1pm, 1-5pm, 5-9pm, 8-11pm)  
**Impact:** If backend changes slots, app must be updated

### 3. No Offline Support
**Issue:** App requires internet connection for all operations  
**Workaround:** Show clear error messages when offline  
**Impact:** Poor UX in low connectivity areas

### 4. No Real-Time Push Notifications
**Issue:** Push notifications use polling, not real-time  
**Workaround:** Poll notifications every 60 seconds when app is active  
**Impact:** Slight delay in receiving notifications

---

## üë• TEAM COORDINATION

### Daily Standups
**Time:** 10:00 AM daily  
**Duration:** 15 minutes  
**Topics:**
- Yesterday's completed tasks
- Today's planned tasks
- Blockers or issues

### Communication Channels
- **Slack/Teams:** #nartawi-mobile-dev
- **Backend Questions:** Contact backend team lead
- **Design Questions:** Refer to signed-off UI designs (no changes allowed)

### Code Review Process
1. Create feature branch: `feature/M1.0.2-{feature-name}`
2. Complete implementation and self-test
3. Create pull request with description
4. Request review from 1+ team members
5. Address review comments
6. Merge after approval

### Git Branch Strategy
```
main (production)
  ‚îî‚îÄ‚îÄ develop
      ‚îî‚îÄ‚îÄ release/M1.0.2
          ‚îú‚îÄ‚îÄ feature/M1.0.2-bundle-filter ‚úÖ
          ‚îú‚îÄ‚îÄ feature/M1.0.2-address-update
          ‚îú‚îÄ‚îÄ feature/M1.0.2-product-details
          ‚îú‚îÄ‚îÄ feature/M1.0.2-disputes
          ‚îî‚îÄ‚îÄ feature/M1.0.2-remove-mock-data
```

---

## üìö REFERENCE DOCUMENTATION

### Implementation Guides
1. **M1.0.2_DETAILED_IMPLEMENTATION_GUIDE.md** - Detailed step-by-step implementation with code examples
2. **IMPLEMENTATION_ROADMAP_SSOT.md** - Overall roadmap for M1.0.2-M1.0.5
3. **COMPREHENSIVE_BACKEND_RESPONSES_PART1.md** - Backend API confirmations part 1
4. **COMPREHENSIVE_BACKEND_RESPONSES_PART2.md** - Backend API confirmations part 2

### API Documentation
- **Swagger UI:** https://nartawi.smartvillageqatar.com/swagger/index.html
- **Base URL:** https://nartawi.smartvillageqatar.com/api
- **API Version:** v1

### Design Assets
- Signed-off UI designs (location TBD)
- **CRITICAL:** Do not modify existing screen layouts or create new screens

---

## ‚úÖ RELEASE CHECKLIST

### Before Starting Development
- [x] All team members reviewed release notes
- [x] Development environment setup complete
- [x] Test account credentials verified
- [x] Swagger documentation accessible
- [x] Git branch `release/M1.0.2` created

### During Development (Per Feature)
- [ ] Feature branch created
- [ ] Implementation complete
- [ ] Unit tests written (if applicable)
- [ ] Self-tested with network logs
- [ ] Code reviewed
- [ ] Merged to release branch

### Before Release to QA
- [ ] All 5 features complete
- [ ] All acceptance criteria met
- [ ] No console errors or warnings
- [ ] Performance acceptable (no lag, fast loading)
- [ ] Memory usage acceptable (<150MB)

### Before Production Release
- [ ] QA testing passed
- [ ] UAT completed with sign-off
- [ ] Release notes updated with actual completion dates
- [ ] App version bumped in pubspec.yaml
- [ ] Change log updated
- [ ] Production deployment scheduled

---

## üîÑ NEXT RELEASE (M1.0.3)

**Start Date:** +3 days after M1.0.2 completion (waiting for backend)  
**Focus:** Scheduled Orders Full CRUD

**Features:**
- CREATE scheduled orders ‚úÖ Ready
- READ/LIST scheduled orders ‚úÖ Ready
- RESCHEDULE next delivery ‚úÖ Ready
- UPDATE schedule (frequency, quantity, days) ‚è≥ Backend testing (3 days)
- DELETE/CANCEL schedule ‚è≥ Backend testing (3 days)

See `M1.0.3_SCHEDULED_ORDERS_GUIDE.md` for details.

---

## üìû SUPPORT & ESCALATION

### Technical Issues
- Check Swagger documentation first
- Review backend response files
- Contact backend team if API behavior unexpected

### Blocker Escalation
1. Try to resolve with team discussion
2. If blocked >2 hours, escalate to tech lead
3. Document blocker in standup

### Emergency Contacts
- **Tech Lead:** [Name/Contact]
- **Backend Lead:** [Name/Contact]
- **Product Owner:** [Name/Contact]

---

## üìù CHANGE LOG

### January 9, 2026
- ‚úÖ Bundle filter feature implemented
- üìù Release notes created
- üéØ M1.0.2 officially started

### [Date]
- [Update as work progresses]

---

**Document Version:** 1.0  
**Last Updated:** January 9, 2026  
**Next Review:** January 16, 2026 (midpoint check)

---

**END OF M1.0.2 RELEASE NOTES**
